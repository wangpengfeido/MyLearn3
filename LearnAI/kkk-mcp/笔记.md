# MCP 笔记

## 核心概念

### 架构

- hosts。发起连接的 llm 应用程序。
- clients。MCP 客户端。它在 hosts 之内。与 servers 为 1:1 连接。
- servers。MCP 服务端。

### （协议的）核心组件

#### 协议层

协议层用于连接请求和响应、处理框架消息、高级通信等。

Server 和 Client 均继承了 Protocol。

#### 传输层

负责 clients 和 servers 的通信。

有两种传输机制：

1. studio。使用标准输入输出通信。适合本地。
2. SSE。

所有传输均使用 JSON-RPC 2.0 交换消息。

#### 消息类型

定义了消息的格式，包含**Request/Result/Error/Notification**。

### Roots

Roots 是由 Clients 告知 Servers 应当关注的范围。它可以是**文件路径**或**URL**。

### prompt

创建可重用的 prompt 和工作流。

支持的 method:

- prompts/list。发现 prompt。
- prompts/get。使用 prompt。

prompt 可以是动态的：

- 根据参数，在 result 中嵌入动态的 resource 上下文。
- 返回的 result 可以是一个多步骤的工作流。
